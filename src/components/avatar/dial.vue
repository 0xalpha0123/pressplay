<template>
  <div class="ion-text-center dial-avatar-container">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      viewBox="0 0 256 256"
      :width="svgDimension"
      :height="svgDimension"
    >
      <circle :class="`fill-${bgColor}`" cx="128" cy="128" r="128" />
      <g transform="translate(0 1.23)">
        <path
          class="tick"
          :class="getTickClass(1)"
          d="M36.61,186.4l-7.22,5a2.48,2.48,0,0,0-.64,3.45l1.17,1.69a2.48,2.48,0,0,0,3.45.64l7.22-5a2.48,2.48,0,0,0,.64-3.45L40.06,187A2.48,2.48,0,0,0,36.61,186.4Z"
        />
        <path
          class="tick"
          :class="getTickClass(2)"
          d="M31.77,178.08l-7.63,4.32a2.48,2.48,0,0,0-.94,3.39l1,1.79a2.5,2.5,0,0,0,3.39.94l7.63-4.33a2.49,2.49,0,0,0,.94-3.38l-1-1.79A2.5,2.5,0,0,0,31.77,178.08Z"
        />
        <path
          class="tick"
          :class="getTickClass(3)"
          d="M27.05,169.42l-8,3.6a2.48,2.48,0,0,0-1.24,3.28l.84,1.87A2.48,2.48,0,0,0,22,179.41l8-3.6a2.48,2.48,0,0,0,1.25-3.28l-.85-1.86A2.48,2.48,0,0,0,27.05,169.42Z"
        />
        <path
          class="tick"
          :class="getTickClass(4)"
          d="M24.39,160.34l-8.28,2.91a2.48,2.48,0,0,0-1.52,3.17l.68,1.93a2.47,2.47,0,0,0,3.17,1.52l8.27-2.9a2.5,2.5,0,0,0,1.53-3.17l-.68-1.94A2.5,2.5,0,0,0,24.39,160.34Z"
        />
        <path
          class="tick"
          :class="getTickClass(5)"
          d="M21.9,151.06l-8.5,2.16a2.48,2.48,0,0,0-1.8,3l.5,2a2.48,2.48,0,0,0,3,1.79l8.51-2.16a2.48,2.48,0,0,0,1.79-3l-.5-2A2.48,2.48,0,0,0,21.9,151.06Z"
        />
        <path
          class="tick"
          :class="getTickClass(6)"
          d="M20.25,141.57,11.59,143a2.49,2.49,0,0,0-2.06,2.85l.33,2a2.5,2.5,0,0,0,2.85,2.06l8.66-1.4a2.49,2.49,0,0,0,2.05-2.85l-.32-2A2.5,2.5,0,0,0,20.25,141.57Z"
        />
        <path
          class="tick"
          :class="getTickClass(7)"
          d="M19.46,132l-8.75.63a2.48,2.48,0,0,0-2.3,2.65l.15,2.05a2.49,2.49,0,0,0,2.66,2.3L20,139a2.47,2.47,0,0,0,2.3-2.65l-.15-2.05A2.49,2.49,0,0,0,19.46,132Z"
        />
        <path
          class="tick"
          :class="getTickClass(8)"
          d="M8.21,124.66l0,2a2.5,2.5,0,0,0,2.45,2.53l8.77.15A2.49,2.49,0,0,0,21.92,127l0-2a2.48,2.48,0,0,0-2.44-2.53l-8.77-.15A2.48,2.48,0,0,0,8.21,124.66Z"
        />
        <path
          class="tick"
          :class="getTickClass(9)"
          d="M9,114.06l-.22,2a2.48,2.48,0,0,0,2.21,2.73l8.73.93a2.48,2.48,0,0,0,2.73-2.21l.22-2a2.5,2.5,0,0,0-2.21-2.73l-8.73-.93A2.5,2.5,0,0,0,9,114.06Z"
        />
        <path
          class="tick"
          :class="getTickClass(10)"
          d="M10.62,103.59l-.4,2a2.48,2.48,0,0,0,2,2.92l8.61,1.7a2.49,2.49,0,0,0,2.92-2l.39-2a2.49,2.49,0,0,0-2-2.92l-8.61-1.7A2.5,2.5,0,0,0,10.62,103.59Z"
        />
        <path
          class="tick"
          :class="getTickClass(11)"
          d="M13.23,93.31l-.57,2a2.47,2.47,0,0,0,1.69,3.08l8.42,2.45a2.47,2.47,0,0,0,3.08-1.69l.58-2a2.49,2.49,0,0,0-1.7-3.08l-8.42-2.45A2.47,2.47,0,0,0,13.23,93.31Z"
        />
        <path
          class="tick"
          :class="getTickClass(12)"
          d="M16.74,83.3,16,85.21a2.48,2.48,0,0,0,1.41,3.22l8.17,3.19a2.49,2.49,0,0,0,3.22-1.41l.75-1.91a2.5,2.5,0,0,0-1.42-3.22L20,81.89A2.48,2.48,0,0,0,16.74,83.3Z"
        />
        <path
          class="tick"
          :class="getTickClass(13)"
          d="M21.12,73.63l-.91,1.84a2.48,2.48,0,0,0,1.12,3.33l7.86,3.9a2.48,2.48,0,0,0,3.33-1.12l.91-1.83a2.49,2.49,0,0,0-1.12-3.34l-7.86-3.9A2.48,2.48,0,0,0,21.12,73.63Z"
        />
        <path
          class="tick"
          :class="getTickClass(14)"
          d="M26.33,64.37l-1.07,1.75a2.49,2.49,0,0,0,.82,3.42l7.48,4.58A2.49,2.49,0,0,0,37,73.3l1.07-1.75a2.5,2.5,0,0,0-.82-3.42l-7.48-4.58A2.49,2.49,0,0,0,26.33,64.37Z"
        />
        <path
          class="tick"
          :class="getTickClass(15)"
          d="M32.34,55.63l-1.22,1.65a2.48,2.48,0,0,0,.51,3.47L38.68,66a2.49,2.49,0,0,0,3.48-.51l1.22-1.65a2.48,2.48,0,0,0-.52-3.48l-7-5.22A2.49,2.49,0,0,0,32.34,55.63Z"
        />
        <path
          class="tick"
          :class="getTickClass(16)"
          d="M39.1,47.47,37.74,49a2.49,2.49,0,0,0,.2,3.51l6.56,5.83a2.49,2.49,0,0,0,3.51-.2l1.36-1.54a2.49,2.49,0,0,0-.2-3.51l-6.56-5.83A2.49,2.49,0,0,0,39.1,47.47Z"
        />
        <path
          class="tick"
          :class="getTickClass(17)"
          d="M46.57,39.92l-1.49,1.41A2.48,2.48,0,0,0,45,44.84l6,6.39a2.49,2.49,0,0,0,3.52.11L56,49.93a2.48,2.48,0,0,0,.11-3.51l-6-6.39A2.49,2.49,0,0,0,46.57,39.92Z"
        />
        <path
          class="tick"
          :class="getTickClass(18)"
          d="M54.67,33.06l-1.61,1.26a2.49,2.49,0,0,0-.42,3.49l5.43,6.9a2.47,2.47,0,0,0,3.48.42l1.62-1.27a2.49,2.49,0,0,0,.42-3.49l-5.43-6.89A2.48,2.48,0,0,0,54.67,33.06Z"
        />
        <path
          class="tick"
          :class="getTickClass(19)"
          d="M63.35,26.94l-1.71,1.12a2.49,2.49,0,0,0-.73,3.44l4.79,7.35a2.48,2.48,0,0,0,3.44.72l1.72-1.12A2.47,2.47,0,0,0,71.58,35l-4.79-7.35A2.49,2.49,0,0,0,63.35,26.94Z"
        />
        <path
          class="tick"
          :class="getTickClass(20)"
          d="M72.54,21.64l-1.81,1a2.48,2.48,0,0,0-1,3.36l4.11,7.75a2.5,2.5,0,0,0,3.37,1l1.81-1a2.47,2.47,0,0,0,1-3.36l-4.11-7.74A2.5,2.5,0,0,0,72.54,21.64Z"
        />
        <path
          class="tick"
          :class="getTickClass(21)"
          d="M82.16,17.15l-1.89.8A2.48,2.48,0,0,0,79,21.21l3.41,8.08a2.49,2.49,0,0,0,3.26,1.32l1.89-.8a2.48,2.48,0,0,0,1.32-3.25l-3.42-8.09A2.48,2.48,0,0,0,82.16,17.15Z"
        />
        <path
          class="tick"
          :class="getTickClass(22)"
          d="M92.14,13.55l-2,.62a2.49,2.49,0,0,0-1.61,3.13l2.69,8.35a2.49,2.49,0,0,0,3.13,1.61l1.95-.63A2.48,2.48,0,0,0,98,23.5l-2.68-8.35A2.48,2.48,0,0,0,92.14,13.55Z"
        />
        <path
          class="tick"
          :class="getTickClass(23)"
          d="M102.4,10.82l-2,.46a2.48,2.48,0,0,0-1.88,3l1.94,8.55a2.48,2.48,0,0,0,3,1.88l2-.45a2.49,2.49,0,0,0,1.88-3l-1.94-8.56A2.48,2.48,0,0,0,102.4,10.82Z"
        />
        <path
          class="tick"
          :class="getTickClass(24)"
          d="M112.86,9.05l-2,.28a2.48,2.48,0,0,0-2.13,2.79l1.17,8.7A2.48,2.48,0,0,0,112.66,23l2-.28a2.48,2.48,0,0,0,2.13-2.79l-1.17-8.69A2.49,2.49,0,0,0,112.86,9.05Z"
        />
        <path
          class="tick"
          :class="getTickClass(25)"
          d="M123.44,8.19l-2,.09A2.48,2.48,0,0,0,119,10.87l.39,8.77A2.48,2.48,0,0,0,122,22l2-.09a2.5,2.5,0,0,0,2.38-2.6l-.4-8.76A2.48,2.48,0,0,0,123.44,8.19Z"
        />
        <path
          class="tick"
          :class="getTickClass(26)"
          d="M129.39,10.55,129,19.32a2.48,2.48,0,0,0,2.37,2.59l2.05.09A2.49,2.49,0,0,0,136,19.62l.39-8.76A2.49,2.49,0,0,0,134,8.27L132,8.18A2.48,2.48,0,0,0,129.39,10.55Z"
        />
        <path
          class="tick"
          :class="getTickClass(27)"
          d="M139.79,11.17l-1.16,8.7a2.48,2.48,0,0,0,2.13,2.79l2,.27a2.49,2.49,0,0,0,2.79-2.14l1.16-8.69a2.49,2.49,0,0,0-2.14-2.79l-2-.27A2.47,2.47,0,0,0,139.79,11.17Z"
        />
        <path
          class="tick"
          :class="getTickClass(28)"
          d="M150.08,12.69l-1.93,8.56a2.48,2.48,0,0,0,1.88,3l2,.45a2.48,2.48,0,0,0,3-1.88l1.93-8.56a2.48,2.48,0,0,0-1.88-3l-2-.45A2.48,2.48,0,0,0,150.08,12.69Z"
        />
        <path
          class="tick"
          :class="getTickClass(29)"
          d="M160.19,15.12l-2.68,8.35a2.49,2.49,0,0,0,1.61,3.13l1.95.62a2.49,2.49,0,0,0,3.13-1.61l2.67-8.35a2.49,2.49,0,0,0-1.61-3.13l-1.95-.62A2.47,2.47,0,0,0,160.19,15.12Z"
        />
        <path
          class="tick"
          :class="getTickClass(30)"
          d="M170,18.43l-3.4,8.08A2.48,2.48,0,0,0,168,29.77l1.89.79a2.49,2.49,0,0,0,3.26-1.32l3.4-8.09a2.48,2.48,0,0,0-1.32-3.25l-1.89-.8A2.49,2.49,0,0,0,170,18.43Z"
        />
        <path
          class="tick"
          :class="getTickClass(31)"
          d="M179.57,22.61l-4.11,7.75a2.48,2.48,0,0,0,1,3.36l1.81,1a2.48,2.48,0,0,0,3.36-1l4.11-7.75a2.49,2.49,0,0,0-1-3.36l-1.82-1A2.49,2.49,0,0,0,179.57,22.61Z"
        />
        <path
          class="tick"
          :class="getTickClass(32)"
          d="M188.68,27.59,183.9,35a2.49,2.49,0,0,0,.73,3.44l1.72,1.12a2.5,2.5,0,0,0,3.44-.73l4.78-7.36a2.49,2.49,0,0,0-.73-3.44l-1.72-1.12A2.5,2.5,0,0,0,188.68,27.59Z"
        />
        <path
          class="tick"
          :class="getTickClass(33)"
          d="M197.29,33.37l-5.42,6.91a2.49,2.49,0,0,0,.43,3.49L193.91,45a2.48,2.48,0,0,0,3.49-.42l5.41-6.9a2.48,2.48,0,0,0-.42-3.49L200.78,33A2.48,2.48,0,0,0,197.29,33.37Z"
        />
        <path
          class="tick"
          :class="getTickClass(34)"
          d="M205.4,39.93l-6,6.4a2.48,2.48,0,0,0,.11,3.51l1.5,1.4a2.48,2.48,0,0,0,3.51-.11l6-6.39a2.49,2.49,0,0,0-.12-3.52l-1.49-1.4A2.48,2.48,0,0,0,205.4,39.93Z"
        />
        <path
          class="tick"
          :class="getTickClass(35)"
          d="M212.87,47.14,206.32,53a2.49,2.49,0,0,0-.2,3.51L207.49,58a2.49,2.49,0,0,0,3.51.2l6.54-5.84a2.48,2.48,0,0,0,.2-3.51l-1.36-1.53A2.49,2.49,0,0,0,212.87,47.14Z"
        />
        <path
          class="tick"
          :class="getTickClass(36)"
          d="M219.69,55l-7,5.23a2.49,2.49,0,0,0-.51,3.48l1.23,1.65a2.48,2.48,0,0,0,3.47.51l7-5.24a2.49,2.49,0,0,0,.51-3.48l-1.22-1.64A2.49,2.49,0,0,0,219.69,55Z"
        />
        <path
          class="tick"
          :class="getTickClass(37)"
          d="M225.78,63.42,218.3,68a2.47,2.47,0,0,0-.81,3.41l1.07,1.75A2.49,2.49,0,0,0,222,74l7.47-4.6a2.47,2.47,0,0,0,.82-3.41l-1.07-1.75A2.49,2.49,0,0,0,225.78,63.42Z"
        />
        <path
          class="tick"
          :class="getTickClass(38)"
          d="M231.08,72.37l-7.85,3.92a2.48,2.48,0,0,0-1.12,3.33l.92,1.83a2.48,2.48,0,0,0,3.33,1.12l7.85-3.91a2.48,2.48,0,0,0,1.12-3.33l-.92-1.84A2.48,2.48,0,0,0,231.08,72.37Z"
        />
        <path
          class="tick"
          :class="getTickClass(39)"
          d="M235.58,81.74,227.41,85A2.48,2.48,0,0,0,226,88.17l.75,1.91a2.49,2.49,0,0,0,3.22,1.4l8.17-3.2a2.48,2.48,0,0,0,1.41-3.22l-.75-1.91A2.48,2.48,0,0,0,235.58,81.74Z"
        />
        <path
          class="tick"
          :class="getTickClass(40)"
          d="M239.24,91.45l-8.41,2.47A2.47,2.47,0,0,0,229.14,97l.58,2a2.48,2.48,0,0,0,3.08,1.68l8.42-2.46a2.49,2.49,0,0,0,1.69-3.08l-.58-2A2.49,2.49,0,0,0,239.24,91.45Z"
        />
        <path
          class="tick"
          :class="getTickClass(41)"
          d="M242,101.49l-8.61,1.71a2.49,2.49,0,0,0-2,2.92l.4,2a2.49,2.49,0,0,0,2.92,2l8.61-1.71a2.48,2.48,0,0,0,2-2.92l-.4-2A2.49,2.49,0,0,0,242,101.49Z"
        />
        <path
          class="tick"
          :class="getTickClass(42)"
          d="M243.89,111.69l-8.72.94a2.49,2.49,0,0,0-2.2,2.74l.22,2a2.47,2.47,0,0,0,2.73,2.2l8.72-.94a2.48,2.48,0,0,0,2.21-2.73l-.22-2A2.49,2.49,0,0,0,243.89,111.69Z"
        />
        <path
          class="tick"
          :class="getTickClass(43)"
          d="M244.85,122.08l-8.77.16a2.48,2.48,0,0,0-2.44,2.53l0,2a2.5,2.5,0,0,0,2.54,2.44l8.77-.16a2.49,2.49,0,0,0,2.44-2.53l0-2A2.48,2.48,0,0,0,244.85,122.08Z"
        />
        <path
          class="tick"
          :class="getTickClass(44)"
          d="M233.49,134.14l-.15,2a2.5,2.5,0,0,0,2.31,2.66l8.75.61a2.47,2.47,0,0,0,2.65-2.3l.15-2.05a2.49,2.49,0,0,0-2.31-2.65l-8.75-.62A2.49,2.49,0,0,0,233.49,134.14Z"
        />
        <path
          class="tick"
          :class="getTickClass(45)"
          d="M232.5,143.49l-.33,2a2.49,2.49,0,0,0,2.06,2.85l8.66,1.39a2.5,2.5,0,0,0,2.85-2.07l.33-2a2.5,2.5,0,0,0-2.06-2.85l-8.67-1.38A2.47,2.47,0,0,0,232.5,143.49Z"
        />
        <path
          class="tick"
          :class="getTickClass(46)"
          d="M230.72,152.72l-.5,2a2.48,2.48,0,0,0,1.8,3l8.5,2.15a2.49,2.49,0,0,0,3-1.8l.5-2a2.49,2.49,0,0,0-1.8-3l-8.5-2.15A2.48,2.48,0,0,0,230.72,152.72Z"
        />
        <path
          class="tick"
          :class="getTickClass(47)"
          d="M228.08,161.72l-.68,1.94a2.48,2.48,0,0,0,1.53,3.16l8.28,2.9a2.49,2.49,0,0,0,3.17-1.53l.67-1.93a2.48,2.48,0,0,0-1.52-3.17l-8.28-2.89A2.48,2.48,0,0,0,228.08,161.72Z"
        />
        <path
          class="tick"
          :class="getTickClass(48)"
          d="M224.71,170.49l-.85,1.87a2.49,2.49,0,0,0,1.24,3.29l8,3.62a2.49,2.49,0,0,0,3.29-1.24l.84-1.87a2.48,2.48,0,0,0-1.23-3.29l-8-3.62A2.48,2.48,0,0,0,224.71,170.49Z"
        />
        <path
          class="tick"
          :class="getTickClass(49)"
          d="M220.52,178.89l-1,1.78a2.5,2.5,0,0,0,.94,3.39l7.64,4.31a2.49,2.49,0,0,0,3.39-.94l1-1.79a2.49,2.49,0,0,0-.94-3.38l-7.64-4.32A2.49,2.49,0,0,0,220.52,178.89Z"
        />
        <path
          class="tick"
          :class="getTickClass(50)"
          d="M215.63,186.93l-1.16,1.69a2.49,2.49,0,0,0,.64,3.46l7.22,5a2.49,2.49,0,0,0,3.46-.64l1.16-1.69a2.49,2.49,0,0,0-.64-3.46l-7.22-5A2.49,2.49,0,0,0,215.63,186.93Z"
        />
      </g>
    </svg>
    <div
      class="box-shadow"
      :style="{ width: `${svgDimension}px`, height: `${svgDimension}px` }"
    ></div>
    <avatar
      :images="images"
      :size="size"
      :size-sm="sizeSm"
      :size-md="sizeMd"
      :size-lg="sizeLg"
      :size-xl="sizeXl"
    ></avatar>
  </div>
</template>
<script>
import inRange from "lodash/inRange";
import AvatarMixin from "@/mixins/avatar.js";
export default {
  props: {
    activeColor: {
      type: String,
      default: "secondary"
    },
    bgColor: {
      type: String,
      default: "primary"
    },
    progressColor: {
      type: String,
      default: "light"
    },
    percent: {
      type: Number,
      default: 0.5
    }
  },
  methods: {
    getTickClass(index) {
      let percent = Math.round(this.percent * 100);
      let number = index * 2;
      return inRange(number, 0, percent + 2)
        ? `fill-${this.activeColor} active`
        : `fill-${this.progressColor}`;
    }
  },
  computed: {
    svgDimension() {
      return this.dimension + this.dimension * 0.3;
    }
  },
  mixins: [AvatarMixin]
};
</script>
<style lang="scss" scoped>
.tick {
  opacity: 0.4;
}
.tick.active {
  opacity: 1;
}
.dial-avatar-container {
  position: relative;
  ion-avatar,
  div.box-shadow {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    margin-left: unset;
    margin-right: unset;
    position: absolute;
  }
  div.box-shadow {
    margin-top: -2px;
    border-radius: 50%;
  }
}
</style>
